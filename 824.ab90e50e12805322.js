"use strict";(self.webpackChunkprivate_screen_booking_app=self.webpackChunkprivate_screen_booking_app||[]).push([[824],{7824:(W,f,r)=>{r.r(f),r.d(f,{TheatreBookingModule:()=>R});var u=r(9808),m=r(1083),l=r(3075),h=r(8966),e=r(5e3),p=r(7423);let A=(()=>{class o{constructor(t){this.data=t,console.log(t)}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-alert-dialog"]],decls:16,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","","cdkFocusInitial",""]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Order Creation Success"),e.qZA(),e.TgZ(2,"div",1)(3,"p"),e._uU(4,"This is your Order Id "),e.TgZ(5,"strong"),e._uU(6),e.qZA(),e._uU(7," ."),e.qZA(),e.TgZ(8,"p"),e._uU(9,"A Email has been sent to the provided mail Id "),e.TgZ(10,"strong"),e._uU(11),e.qZA(),e._uU(12,", Check the mail for payment procedure or ping us on whatsapp."),e.qZA()(),e.TgZ(13,"div",2)(14,"button",3),e._uU(15,"Ok"),e.qZA()()),2&t&&(e.xp6(6),e.Oqu(n.data.orderId),e.xp6(5),e.Oqu(n.data.email))},directives:[h.uh,h.xY,h.H8,p.lW,h.ZT],styles:[""]}),o})();var v=r(520),T=r(262),U=r(9646),I=r(2340),b=r(7261);let _=(()=>{class o{constructor(t,n){this.http=t,this.snackBar=n,this.apiUrl=I.N.apiURL}availableSlots(t,n){return this.http.get(this.apiUrl+"/book-now/available-slots",{params:(new v.LE).set("theatreName",n).set("screenDate",t)}).pipe((0,T.K)(this.handleError("available theatres")))}confirmedOrder(t){return console.log(t.screenDate),this.http.post(this.apiUrl+"/book-now/order",t).pipe((0,T.K)(this.handleError("confirming the order")))}handleError(t="operation",n){return i=>(console.error(`${t} failed: ${i.message}`),this.openSnackBar(),(0,U.of)(n))}openSnackBar(){this.snackBar.open("An Error Occured.Please try again","x",{duration:5e3,panelClass:"failure-snackbar"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(v.eN),e.LFG(b.ux))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var g=r(4623),k=r(5899),d=r(9224),Z=r(7322),q=r(7531);function O(o,a){1&o&&(e.TgZ(0,"div",14),e._UZ(1,"mat-progress-bar",15),e.qZA())}function B(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Please provide a name. "),e.qZA())}function x(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Please provide a valid email address. "),e.qZA())}function y(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," contact number must be at least 10 characters long. "),e.qZA())}let D=(()=>{class o{constructor(t,n,i,s,c){this.fb=t,this.theatreService=n,this.router=i,this.dialog=s,this.snackBar=c,this.checkoutForm=this.fb.group({fullName:["",l.kI.required],email:["",[l.kI.required,l.kI.email]],phoneNumber:["",[l.kI.required,l.kI.minLength(10),l.kI.maxLength(10),l.kI.pattern("^[0-9]+$")]]}),this.isloading=!1,this.order={fullName:"",email:"",phoneNumber:"",theatreName:"",screenDate:"",screenFromTime:new Date,screenToTime:new Date,price:0,numberOfSeats:0,slotName:""},this.confirmedOrder={fullName:"",email:"",phoneNumber:"",theatreName:"",screenDate:"",screenFromTime:new Date,screenToTime:new Date,price:0,numberOfSeats:0,slotName:""}}ngOnInit(){let t=history.state[0];null===localStorage.getItem("order")&&void 0===t&&this.router.navigate(["/home"]),void 0!==t&&(this.order.price=t.price,this.order.slotName=t.selectedSlot,this.order.theatreName=t.selectedTheatre,this.order.numberOfSeats=t.seats,this.order.screenDate=t.selectedDate,localStorage.setItem("order",JSON.stringify(this.order)),console.log(this.order.screenDate),console.log(this.order)),null!==localStorage.getItem("order")&&(this.order=JSON.parse(localStorage.getItem("order")))}onSubmit(t){null!==localStorage.getItem("order")&&(this.confirmedOrder=JSON.parse(localStorage.getItem("order"))),this.confirmedOrder.fullName=t.value.fullName,this.confirmedOrder.email=t.value.email,this.confirmedOrder.phoneNumber=t.value.phoneNumber,console.log("confirmed order "+this.confirmedOrder.screenDate),this.isloading=!0,this.theatreService.confirmedOrder(this.confirmedOrder).subscribe(n=>{console.log(n),this.isloading=!1,n&&(this.openSnackBar(),this.openConfirmationDialog(n.order.email,n.order._id)),localStorage.removeItem("order"),this.router.navigate(["home"])})}openConfirmationDialog(t,n){this.dialog.open(A,{data:{email:t,orderId:n},width:"360px",height:"290px"})}openSnackBar(){this.snackBar.open("Order Success","x",{duration:5e3,panelClass:"success-snackbar"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(_),e.Y36(m.F0),e.Y36(h.uw),e.Y36(b.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-checkout"]],decls:62,vars:13,consts:[["mat-button","","routerLink","/book-now"],[1,"container",2,"margin","auto"],[1,"h5"],["class","mt-2 mb-2",4,"ngIf"],[1,"row"],[1,"col-6","col-sm-3"],[1,"h4"],[1,"checkout-form",3,"formGroup","ngSubmit"],["appearance","standard"],["matInput","","formControlName","fullName","placeholder","Your Full Name"],[4,"ngIf"],["matInput","","formControlName","email","placeholder","Your email"],["matInput","","formControlName","phoneNumber","placeholder","Your contact number"],["mat-raised-button","","type","submit",3,"disabled"],[1,"mt-2","mb-2"],["mode","query"]],template:function(t,n){if(1&t&&(e.TgZ(0,"button",0),e._uU(1,"GO BACK"),e.qZA(),e.TgZ(2,"div",1)(3,"div")(4,"div",2),e._uU(5,"How To"),e.qZA(),e.TgZ(6,"mat-list")(7,"mat-list-item"),e._uU(8,"1.Check details mentioned below are correct"),e.qZA(),e.TgZ(9,"mat-list-item"),e._uU(10,"2.Enter valid Name, email id ,contact number "),e.qZA(),e.TgZ(11,"mat-list-item"),e._uU(12,"3.Up on confirming ,you will receive a mail ,containing payment procedure"),e.qZA()()(),e.YNc(13,O,2,0,"div",3),e.TgZ(14,"mat-card")(15,"div",4)(16,"div",5)(17,"div",6),e._uU(18,"TheatreName"),e.qZA(),e.TgZ(19,"div",6),e._uU(20,"Date"),e.qZA(),e.TgZ(21,"div",6),e._uU(22,"SlotName"),e.qZA(),e.TgZ(23,"div",6),e._uU(24,"Price"),e.qZA(),e.TgZ(25,"div",6),e._uU(26,"Number of seats"),e.qZA()(),e.TgZ(27,"div",5)(28,"div",6),e._uU(29),e.qZA(),e.TgZ(30,"div",6),e._uU(31),e.ALo(32,"date"),e.qZA(),e.TgZ(33,"div",6),e._uU(34),e.qZA(),e.TgZ(35,"div",6),e._uU(36),e.qZA(),e.TgZ(37,"div",6),e._uU(38),e.qZA()()(),e._UZ(39,"mat-card-header"),e.TgZ(40,"mat-card-content")(41,"form",7),e.NdJ("ngSubmit",function(){return n.onSubmit(n.checkoutForm)}),e.TgZ(42,"mat-form-field",8)(43,"div")(44,"mat-label"),e._uU(45," Full Name: "),e.qZA(),e._UZ(46,"input",9),e.YNc(47,B,2,0,"div",10),e.qZA()(),e.TgZ(48,"mat-form-field",8)(49,"div")(50,"mat-label"),e._uU(51," Email: "),e.qZA(),e._UZ(52,"input",11),e.YNc(53,x,2,0,"div",10),e.qZA()(),e.TgZ(54,"mat-form-field",8)(55,"div")(56,"mat-label"),e._uU(57,"Contact Number"),e.qZA(),e._UZ(58,"input",12),e.YNc(59,y,2,0,"div",10),e.qZA()(),e.TgZ(60,"button",13),e._uU(61,"Confirm Booking"),e.qZA()()()()()),2&t){let i,s,c;e.xp6(13),e.Q6J("ngIf",n.isloading),e.xp6(16),e.Oqu(n.order.theatreName),e.xp6(2),e.Oqu(e.lcZ(32,11,n.order.screenDate)),e.xp6(3),e.Oqu(n.order.slotName),e.xp6(2),e.Oqu(n.order.price),e.xp6(2),e.Oqu(n.order.numberOfSeats),e.xp6(3),e.Q6J("formGroup",n.checkoutForm),e.xp6(6),e.Q6J("ngIf",(null==(i=n.checkoutForm.get("fullName"))?null:i.invalid)&&((null==(i=n.checkoutForm.get("fullNamename"))?null:i.dirty)||(null==(i=n.checkoutForm.get("fullName"))?null:i.touched))),e.xp6(6),e.Q6J("ngIf",(null==(s=n.checkoutForm.get("email"))?null:s.invalid)&&((null==(s=n.checkoutForm.get("email"))?null:s.dirty)||(null==(s=n.checkoutForm.get("email"))?null:s.touched))),e.xp6(6),e.Q6J("ngIf",(null==(c=n.checkoutForm.get("phoneNumber"))?null:c.invalid)&&((null==(c=n.checkoutForm.get("checkoutForm"))?null:c.dirty)||(null==(c=n.checkoutForm.get("phoneNumber"))?null:c.touched))),e.xp6(1),e.Q6J("disabled",n.checkoutForm.invalid)}},directives:[p.lW,m.rH,g.i$,g.Tg,u.O5,k.pW,d.a8,d.dk,d.dn,l._Y,l.JL,l.sg,Z.KE,Z.hX,q.Nt,l.Fj,l.JJ,l.u],pipes:[u.uU],styles:[".header-image[_ngcontent-%COMP%]{background-image:url(5ce806cb0abbc25fc5589461_1558709963909.26aec4ddfbfde50b.jpg);background-size:cover}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.checkout-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}mat-form-field[_ngcontent-%COMP%]{width:70%}"]}),o})();var F=r(6856),C=r(9832);function J(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"mat-card"),e._UZ(2,"img",19),e.TgZ(3,"mat-card-content",20)(4,"p"),e._uU(5," Insert description of the theatre 2 like features provided and number of seats "),e.qZA()(),e.TgZ(6,"mat-card-actions")(7,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectedTheatreEvent("TH0")}),e._uU(8,"Select Theatre 0"),e.qZA()()()()}}function E(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"mat-card"),e._UZ(2,"img",19),e.TgZ(3,"mat-card-content",20)(4,"p"),e._uU(5," Insert description of the theatre 2 like features provided and number of seats "),e.qZA()(),e.TgZ(6,"mat-card-actions")(7,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectedTheatreEvent("TH1")}),e._uU(8,"Select Theatre 1"),e.qZA()()()()}}function M(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"mat-card"),e._UZ(2,"img",19),e.TgZ(3,"mat-card-content",20)(4,"p"),e._uU(5,"Insert description of the theatre 2 like features provided and number of seats "),e.qZA()(),e.TgZ(6,"mat-card-actions")(7,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectedTheatreEvent("TH2")}),e._uU(8,"Select Theatre 2"),e.qZA()()()()}}function Y(o,a){1&o&&(e.TgZ(0,"div",22),e._UZ(1,"mat-progress-bar",23),e.qZA())}function w(o,a){1&o&&(e.TgZ(0,"div"),e._uU(1," Oops,There are no Slots available for Selected Date or Theatre. Please Choose different theatre or change date "),e.qZA())}function P(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-button-toggle",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().slotSelectedEvent("MORNING")}),e._uU(1," Morning "),e.qZA()}}function H(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-button-toggle",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().slotSelectedEvent("AFTERNOON")}),e._uU(1," Afternoon "),e.qZA()}}function Q(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-button-toggle",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().slotSelectedEvent("EVENING")}),e._uU(1," Evening "),e.qZA()}}function L(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-button-toggle",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().slotSelectedEvent("NIGHT")}),e._uU(1," Night "),e.qZA()}}const S=function(o){return{display:o}},G=function(o){return{"flex-container":o}},z=[{path:"",component:(()=>{class o{constructor(t,n,i){this.theatreService=t,this.router=n,this.route=i,this.today=new Date,this.selectedTheatre="",this.selectedSlot="",this.highlatedTheatre="",this.price=0,this.seats=0,this.hours=0,this.availableTheatre={isAfternoon:!1,isEvening:!1,isMorning:!1,isNight:!1,screenDate:"",theatreName:"",_id:"",price:0,seats:0,hours:0},this.isloading=!1,this.availableSlots={morning:!1,afternoon:!1,evening:!1,night:!1}}ngOnInit(){this.route.queryParams.subscribe(t=>{this.highlatedTheatre=void 0!==t.theatre?t.theatre:"",console.log(this.highlatedTheatre)})}selectedDateEvent(t){console.log(t),this.selectedDate=t,this.selectedDate=this.formatDate(this.selectedDate),console.log(this.selectedDate),this.selectedTheatre="",this.selectedTheatreEvent(""),this.availableSlots.afternoon=!1,this.availableSlots.morning=!1,this.availableSlots.evening=!1,this.availableSlots.night=!1,console.log(this.highlatedTheatre)}ngAfterViewInit(){}padTo2Digits(t){return t.toString().padStart(2,"0")}formatDate(t){return[t.getFullYear(),this.padTo2Digits(t.getMonth()+1),this.padTo2Digits(t.getDate())].join("-")}selectedTheatreEvent(t){console.log(t),this.selectedTheatre=t,""!==this.selectedTheatre?(this.router.navigate(["/book-now"],{queryParams:{theatre:t},skipLocationChange:!1,queryParamsHandling:"merge"}),this.isloading=!0,this.theatreService.availableSlots(this.selectedDate,this.selectedTheatre).subscribe(n=>{console.log(n),this.isloading=!1,this.availableTheatre=n.theatre,console.log(this.availableTheatre),this.price=this.availableTheatre.price,this.hours=this.availableTheatre.hours,this.seats=this.availableTheatre.seats,this.availableSlots.morning=this.availableTheatre.isMorning,this.availableSlots.afternoon=this.availableTheatre.isAfternoon,this.availableSlots.evening=this.availableTheatre.isEvening,this.availableSlots.night=this.availableTheatre.isNight,console.log(this.availableSlots)})):this.router.navigate(["/book-now"])}slotSelectedEvent(t){this.selectedSlot=t}checkoutPage(){console.log(this.selectedDate),this.router.navigateByUrl("/book-now/checkout",{state:[{selectedDate:this.selectedDate,selectedTheatre:this.selectedTheatre,selectedSlot:this.selectedSlot,price:this.price,hours:this.hours,seats:this.seats}]})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_),e.Y36(m.F0),e.Y36(m.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-theatre-booking"]],decls:36,vars:22,consts:[[1,"container","mt-3","mb-2"],[1,"h5"],[1,"inline-calendar-card"],[3,"minDate","selected","selectedChange"],[1,"container",3,"ngStyle"],[1,"row",3,"ngClass"],[1,"h3",2,"text-align","center"],["class","col-sm-4 mb-3",4,"ngIf"],["class","mt-2 mb-2",4,"ngIf"],["name","slotPicker","aria-label","Slot Picker",1,"flex-container"],[1,"h3"],[4,"ngIf"],["mat-stroked-button","","class","button-container","value","morning",3,"click",4,"ngIf"],["mat-stroked-button","","class","button-container","value","afternoon",3,"click",4,"ngIf"],["mat-stroked-button","","class","button-container","value","evening",3,"click",4,"ngIf"],["mat-stroked-button","","class","button-container","value","night",3,"click",4,"ngIf"],[1,"book-now-btn"],["color","primary","mat-button","",3,"disabled","click"],[1,"col-sm-4","mb-3"],["height","200px","mat-card-image","","src","https://picsum.photos/seed/picsum/1200/300","alt","Random second slide"],[1,"mt-3"],["mat-stroked-button","",3,"click"],[1,"mt-2","mb-2"],["mode","query"],["mat-stroked-button","","value","morning",1,"button-container",3,"click"],["mat-stroked-button","","value","afternoon",1,"button-container",3,"click"],["mat-stroked-button","","value","evening",1,"button-container",3,"click"],["mat-stroked-button","","value","night",1,"button-container",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"div",1),e._uU(3,"How To"),e.qZA(),e.TgZ(4,"mat-list")(5,"mat-list-item"),e._uU(6,"1.Pick a date"),e.qZA(),e.TgZ(7,"mat-list-item"),e._uU(8,"2.Then select the theatre according number of seats and price"),e.qZA(),e.TgZ(9,"mat-list-item"),e._uU(10,"3.Then select Slot (Morning,Afternoon,Evening,Night)"),e.qZA(),e.TgZ(11,"mat-list-item"),e._uU(12,"4.Press Book-now button ,it will take you to checkout page"),e.qZA()()(),e.TgZ(13,"div")(14,"mat-card",2)(15,"mat-calendar",3),e.NdJ("selectedChange",function(s){return n.selectedDateEvent(s)}),e.qZA()()()(),e.TgZ(16,"div",4)(17,"div",5)(18,"div",6),e._uU(19,"Select the theatre"),e.qZA(),e.YNc(20,J,9,0,"div",7),e.YNc(21,E,9,0,"div",7),e.YNc(22,M,9,0,"div",7),e.qZA()(),e.YNc(23,Y,2,0,"div",8),e.TgZ(24,"div",4)(25,"mat-button-toggle-group",9)(26,"div",10),e._uU(27),e.qZA(),e.YNc(28,w,2,0,"div",11),e.YNc(29,P,2,0,"mat-button-toggle",12),e.YNc(30,H,2,0,"mat-button-toggle",13),e.YNc(31,Q,2,0,"mat-button-toggle",14),e.YNc(32,L,2,0,"mat-button-toggle",15),e.qZA()(),e.TgZ(33,"div",16)(34,"button",17),e.NdJ("click",function(){return n.checkoutPage()}),e._uU(35," BOOK-NOW "),e.qZA()()),2&t&&(e.xp6(15),e.Q6J("minDate",n.today)("selected",n.selectedDate),e.xp6(1),e.Q6J("ngStyle",e.VKq(16,S,n.selectedDate?"block":"None")),e.xp6(1),e.Q6J("ngClass",e.VKq(18,G,""!==n.highlatedTheatre)),e.xp6(3),e.Q6J("ngIf","TH0"===n.highlatedTheatre||""===n.highlatedTheatre),e.xp6(1),e.Q6J("ngIf","TH1"===n.highlatedTheatre||""===n.highlatedTheatre),e.xp6(1),e.Q6J("ngIf","TH2"===n.highlatedTheatre||""===n.highlatedTheatre),e.xp6(1),e.Q6J("ngIf",n.isloading),e.xp6(1),e.Q6J("ngStyle",e.VKq(20,S,n.selectedTheatre?"block":"None")),e.xp6(3),e.hij("Select the Slot for ",n.selectedTheatre,""),e.xp6(1),e.Q6J("ngIf",!1===n.isloading&&!1===n.availableSlots.morning&&!1===n.availableSlots.afternoon&&!1===n.availableSlots.evening&&!1===n.availableSlots.night),e.xp6(1),e.Q6J("ngIf",n.availableSlots.morning),e.xp6(1),e.Q6J("ngIf",n.availableSlots.afternoon),e.xp6(1),e.Q6J("ngIf",n.availableSlots.evening),e.xp6(1),e.Q6J("ngIf",n.availableSlots.night),e.xp6(2),e.Q6J("disabled",""===n.selectedSlot))},directives:[g.i$,g.Tg,d.a8,F._H,u.PC,u.mk,u.O5,d.G2,d.dn,d.hq,p.lW,k.pW,C.A9,C.Yi],styles:[".inline-calendar-card[_ngcontent-%COMP%]{width:320px;margin:auto}.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex-wrap:wrap;white-space:normal}.button-container[_ngcontent-%COMP%]{margin:10px;width:50px}.book-now-btn[_ngcontent-%COMP%]{text-align:center;font-size:large;margin:30px}.mat-button-toggle-group-appearance-standard[_ngcontent-%COMP%]{border:none}.mat-button-toggle[_ngcontent-%COMP%]{width:100px;border-radius:10px}.mat-button-toggle[_ngcontent-%COMP%]:hover, .mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:transparent;color:#10f!important}"]}),o})()},{path:"checkout",component:D}];let K=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.Bz.forChild(z)],m.Bz]}),o})();var N=r(7341);let j=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,N.h]]}),o})(),R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,K,N.h,l.UX,l.u5,j]]}),o})()}}]);